<!-- Hero Header Section (Premium Minimalist) -->
<div class="hero-summary fade-in">
    <div class="hero-info">
        <h1 class="mb-1">Indicadores TIM</h1>
        <p>Control de gestión y estadísticas de emisión nacional.</p>
    </div>
    <div class="hero-stats-mini">
        <div class="hero-stat-item">
            <span>Total Procesados</span>
            <strong>3,285</strong>
        </div>
        <div class="hero-stat-item">
            <span>Efectividad</span>
            <strong>98.5%</strong>
        </div>
    </div>
</div>

<!-- Estadísticas Detalladas (Premium Soft Cards) -->
<div class="stats-grid">
    <!-- Emitidos -->
    <div class="stat-card card-blue fade-in pointer h-100 d-flex flex-column position-relative overflow-hidden" style="animation-delay: 0.1s;">
        <div class="d-flex justify-content-between align-items-start mb-3" style="position: relative; z-index: 2;">
            <div>
                <h3 class="stat-value text-primary-blue mb-0" style="font-size: 1.8rem; font-weight: 700; font-family: 'Roboto', sans-serif; letter-spacing: -0.5px; line-height: 1;">1,250</h3>
                <span class="stat-label text-muted" style="font-size: 0.8rem; font-weight: 500;">Emitidos</span>
            </div>
            <div class="icon-circle bg-light-blue" style="width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-id-card text-primary-blue" style="font-size: 1.4rem;"></i>
            </div>
        </div>
        
        <div class="mt-auto pt-3 border-top d-flex justify-content-between align-items-center" style="border-top-color: rgba(0,0,0,0.03) !important; position: relative; z-index: 2;">
            <div class="d-flex align-items-center" style="background: rgba(59, 130, 246, 0.05); padding: 4px 10px; border-radius: 8px;">
                <span class="text-primary-blue mr-2" style="font-size: 0.85rem; font-weight: 600;"><i class="fas fa-arrow-up"></i> 12%</span>
                <span class="text-primary-blue" style="font-size: 0.7rem; font-weight: 500; text-transform: uppercase;">Tendencia</span>
            </div>
            <div style="width: 8px; height: 8px; border-radius: 50%; background-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59,130,246,0.15);"></div>
        </div>
        <i class="fas fa-id-card position-absolute card-watermark" style="font-size: 7rem; color: rgba(59,130,246,0.08); bottom: -1rem; right: -1rem; z-index: 1;"></i>
    </div>

    <!-- Rechazados -->
    <div class="stat-card card-red fade-in pointer h-100 d-flex flex-column position-relative overflow-hidden" style="animation-delay: 0.2s;">
        <div class="d-flex justify-content-between align-items-start mb-3" style="position: relative; z-index: 2;">
            <div>
                <h3 class="stat-value text-red mb-0" style="font-size: 1.8rem; font-weight: 700; font-family: 'Roboto', sans-serif; letter-spacing: -0.5px; line-height: 1;">45</h3>
                <span class="stat-label text-muted" style="font-size: 0.8rem; font-weight: 500;">Rechazados</span>
            </div>
            <div class="icon-circle bg-light-red" style="width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-times-circle text-red" style="font-size: 1.4rem;"></i>
            </div>
        </div>
        
        <div class="mt-auto pt-3 border-top d-flex justify-content-between align-items-center" style="border-top-color: rgba(0,0,0,0.03) !important; position: relative; z-index: 2;">
            <div class="d-flex align-items-center" style="background: rgba(239, 68, 68, 0.05); padding: 4px 10px; border-radius: 8px;">
                <span class="text-danger mr-2" style="font-size: 0.85rem; font-weight: 600;"><i class="fas fa-arrow-down"></i> 5%</span>
                <span class="text-danger" style="font-size: 0.7rem; font-weight: 500; text-transform: uppercase;">Tendencia</span>
            </div>
            <div style="width: 8px; height: 8px; border-radius: 50%; background-color: #ef4444; box-shadow: 0 0 0 3px rgba(239,68,68,0.15);"></div>
        </div>
        <i class="fas fa-times-circle position-absolute card-watermark" style="font-size: 7rem; color: rgba(239,68,68,0.08); bottom: -1rem; right: -1rem; z-index: 1;"></i>
    </div>

    <!-- Liberados -->
    <div class="stat-card card-teal fade-in pointer h-100 d-flex flex-column position-relative overflow-hidden" style="animation-delay: 0.3s;">
        <div class="d-flex justify-content-between align-items-start mb-3" style="position: relative; z-index: 2;">
            <div>
                <h3 class="stat-value text-primary-teal mb-0" style="font-size: 1.8rem; font-weight: 700; font-family: 'Roboto', sans-serif; letter-spacing: -0.5px; line-height: 1;">890</h3>
                <span class="stat-label text-muted" style="font-size: 0.8rem; font-weight: 500;">Liberados</span>
            </div>
            <div class="icon-circle bg-light-teal" style="width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-unlock-alt text-primary-teal" style="font-size: 1.4rem;"></i>
            </div>
        </div>
        
        <div class="mt-auto pt-3 border-top d-flex justify-content-between align-items-center" style="border-top-color: rgba(0,0,0,0.03) !important; position: relative; z-index: 2;">
             <div class="d-flex align-items-center" style="background: rgba(89, 140, 137, 0.05); padding: 4px 10px; border-radius: 8px;">
                <span class="text-primary-teal mr-2" style="font-size: 0.85rem; font-weight: 600;"><i class="fas fa-arrow-up"></i> 8%</span>
                <span class="text-primary-teal" style="font-size: 0.7rem; font-weight: 500; text-transform: uppercase;">Tendencia</span>
            </div>
            <div style="width: 8px; height: 8px; border-radius: 50%; background-color: #598c89; box-shadow: 0 0 0 3px rgba(89,140,137,0.15);"></div>
        </div>
        <i class="fas fa-unlock-alt position-absolute card-watermark" style="font-size: 7rem; color: rgba(89,140,137,0.08); bottom: -1rem; right: -1rem; z-index: 1;"></i>
    </div>

    <!-- Impresos -->
    <div class="stat-card card-amber fade-in pointer h-100 d-flex flex-column position-relative overflow-hidden" style="animation-delay: 0.4s;">
        <div class="d-flex justify-content-between align-items-start mb-3" style="position: relative; z-index: 2;">
            <div>
                <h3 class="stat-value text-amber mb-0" style="font-size: 1.8rem; font-weight: 700; font-family: 'Roboto', sans-serif; letter-spacing: -0.5px; line-height: 1;">1,100</h3>
                <span class="stat-label text-muted" style="font-size: 0.8rem; font-weight: 500;">Impresos</span>
            </div>
            <div class="icon-circle bg-light-amber" style="width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-print text-amber" style="font-size: 1.4rem;"></i>
            </div>
        </div>
        
        <div class="mt-auto pt-3 border-top d-flex justify-content-between align-items-center" style="border-top-color: rgba(0,0,0,0.03) !important; position: relative; z-index: 2;">
            <div class="d-flex align-items-center" style="background: rgba(245, 158, 11, 0.05); padding: 4px 10px; border-radius: 8px;">
                <span class="text-amber mr-2" style="font-size: 0.85rem; font-weight: 600;"><i class="fas fa-arrow-up"></i> 15%</span>
                <span class="text-amber" style="font-size: 0.7rem; font-weight: 500; text-transform: uppercase;">Tendencia</span>
            </div>
            <div style="width: 8px; height: 8px; border-radius: 50%; background-color: #f59e0b; box-shadow: 0 0 0 3px rgba(245,158,11,0.15);"></div>
        </div>
        <i class="fas fa-print position-absolute card-watermark" style="font-size: 7rem; color: rgba(245,158,11,0.08); bottom: -1rem; right: -1rem; z-index: 1;"></i>
    </div>
</div>

<!-- Panel de Filtros Moderno (Inspirado en Identificacion) -->
<div class="filter-panel fade-in" style="animation-delay: 0.5s;">
    <form [formGroup]="filterForm">
        <div class="filter-header">
            <h5><i class="fas fa-filter"></i> Filtros de Segmentación</h5>
            <div class="d-flex align-items-center">
                <button type="button" class="btn btn-sm btn-link text-muted font-weight-bold mr-3" style="text-decoration: none; font-size: 0.75rem;" (click)="filterForm.reset()">Limpiar Filtros</button>
                <button type="submit" class="btn btn-ok px-4 py-2" style="border-radius: 14px; font-size: 0.85rem; font-weight: 800; background: #598c89 !important;">
                    <i class="fas fa-layer-group mr-2"></i>Actualizar Vista
                </button>
            </div>
        </div>

        <!-- Fila 1: Temporalidad y Búsqueda Directa -->
        <div class="row mb-4">
            <div class="col-lg-3">
                <div class="modern-form-group">
                    <label>Fecha Desde</label>
                    <app-pastel-datepicker iconClass="fas fa-calendar-alt" placeholder="Desde" formControlName="desde"></app-pastel-datepicker>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="modern-form-group">
                    <label>Fecha Hasta</label>
                    <app-pastel-datepicker iconClass="fas fa-calendar-check" placeholder="Hasta" formControlName="hasta"></app-pastel-datepicker>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="modern-form-group">
                    <label>Origen (Oficina / Usuario / Sucursal)</label>
                    <div class="input-group flex-nowrap">
                         <div class="input-group-prepend">
                            <span class="input-group-text"><i class="fas fa-search-location"></i></span>
                        </div>
                        <input type="text" class="form-control" placeholder="Escriba aquí para buscar origen..." formControlName="origen">
                    </div>
                </div>
            </div>
        </div>

        <!-- Fila 2: Segmentación por Rango Militar -->
        <div class="row">
            <div class="col-lg-6">
                 <div class="modern-form-group">
                    <label>Componente Militar</label>
                    <div class="input-group flex-nowrap">
                         <div class="input-group-prepend">
                            <span class="input-group-text"><i class="fas fa-shield-alt"></i></span>
                        </div>
                        <select class="form-control" formControlName="componente">
                            <option value="">Todos los componentes...</option>
                            <option *ngFor="let comp of componentes" [value]="comp.id">{{ comp.nombre }}</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="modern-form-group">
                    <label>Grado Jerárquico</label>
                    <div class="input-group flex-nowrap">
                         <div class="input-group-prepend">
                            <span class="input-group-text"><i class="fas fa-star"></i></span>
                        </div>
                        <select class="form-control" formControlName="grado">
                            <option value="">Todos los grados...</option>
                            <option *ngFor="let grado of grados" [value]="grado">{{ grado }}</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<!-- Tabla de Detalles -->
<div class="details-table-wrapper fade-in" style="animation-delay: 0.6s;">
    <app-dynamic-table 
        [config]="tableConfig" 
        [data]="tableData"
        (rowClicked)="onRowClicked($event)" 
        (actionClicked)="onTableAction($event)">
    </app-dynamic-table>
</div>